
<!--------------------------------------------------------------------->
<!-- Lexical structure                                               -->
<!--------------------------------------------------------------------->
<h1 id="lexical-structure"></h1>
<moveto-doc->
    <p>
        //TODO this works as a summary for the elements of the language
    </p>
</moveto-doc->















<!--------------------------------------------------------------------->
<!-- Character set                                                   -->
<!--------------------------------------------------------------------->
<h1 id="character-set"></h1>
<moveto-doc->
    <p>
        After the <a href="#preprocessor">preprocessing phase</a>, only a <b>small number</b> of <b>characters</b> are left.<br>
        These characters <b>compose the <a href="#tokens">tokens</a></b> that are used in the compilation phase.<br>
        Any unknown character generates an error.
    </p>
    <p>
        The allowed characters are:
    </p>
    <p>
        <code>a</code> <code>b</code> <code>c</code> <code>d</code> <code>e</code> <code>f</code> <code>g</code> <code>h</code> <code>i</code> <code>j</code> <code>k</code> <code>l</code> <code>m</code>
        <code>n</code> <code>o</code> <code>p</code> <code>q</code> <code>r</code> <code>s</code> <code>t</code> <code>u</code> <code>v</code> <code>w</code> <code>x</code> <code>y</code> <code>z</code><br>
        <code>A</code> <code>B</code> <code>C</code> <code>D</code> <code>E</code> <code>F</code> <code>G</code> <code>H</code> <code>I</code> <code>J</code> <code>K</code> <code>L</code> <code>M</code>
        <code>N</code> <code>O</code> <code>P</code> <code>Q</code> <code>R</code> <code>S</code> <code>T</code> <code>U</code> <code>V</code> <code>W</code> <code>X</code> <code>Y</code> <code>Z</code><br>
        <code>0</code> <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code> <code>7</code> <code>8</code> <code>9</code> <code>_</code><br>
        <code>!</code> <code>$</code> <code>%</code> <code>&</code> <code>(</code> <code>)</code> <code>*</code> <code>+</code> <code>-</code> <code>/</code> <code>:</code> <code>&lt;</code> <code>=</code>
        <code>&gt;</code> <code>?</code> <code>@</code> <code>^</code> <code>`</code> <code>|</code> <code>~</code> <code>;</code> <code>{</code> <code>}</code> <code>[</code> <code>]</code> <code>.</code><br>
        <code><space-></space-></code> <code><tab-></tab-></code> <code><nl-></nl-></code>
    </p>
    <p>
        String <a href="#literals">literals</a> can contain any unicode character. They are converted to allowed characters during the compilation phase.//TODO<br>
        Carriage return characters (\r) are ignored.
    </p>
</moveto-doc->
















<!--------------------------------------------------------------------->
<!-- Tokens                                                          -->
<!--------------------------------------------------------------------->
<h1 id="tokens"></h1>
<moveto-doc->
    <p>
        <b>Tokens</b> are the fundamental elements of the source code of any program.<br>
        They are <b>sequences</b> of one or more <a href="#character-set">allowed <b>characters</b></a> that follow specific patterns.<br>
        One or more tokens create a <a href="#syntactic-elements">syntactic element</a>.
    </p>
    <p>
        A token ends when a character that isn't allowed in its pattern is encountered. //TODO   ".:"    "(?"    and similar cases
        Tokens can also be separated by any number of <code><tab-></tab-></code>, <code><space-></space-></code> and <code><nl-></nl-></code> characters.<br>
        Sequences of characters that don't follow any of the recognized patterns generate an error. //TODO LINK
    </p>
    <p>
        Tokens are case sensitive, with the only exception of <a href="#literals">hexadecimal literals</a>.<br>
        <code><tab-></tab-></code>, <code><space-></space-></code> and <code><nl-></nl-></code> characters are not not considered tokens.
        Instead, they are simply discarded during the tokenization phase.
    </p>
    <p>
        Tokens are divided in 4 categories:
    </p>

    <div class="table-container"><table>
        <thead>
            <tr>
                <th>Category</th>
                <th style="text-align: center;" colspan="4">Pattern</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th class="nowrap medium"><a href="#keywords">Keyword</a></th>
                <td><div class="split-td-outer">
                    <div class="split-td" style="line-height: 3ch;">
                        <a href="#namespaces">                   <code><w->namespace</w-></code></a>
                        <a href="#enums">                        <code><w->enum</w-></code></a>
                        <a href="#structs">                      <code><w->struct</w-></code></a>
                        <a href="#const-qualifier">              <code><t->const</t-></code></a>
                        <a href="#auto-specifier">               <code><t->auto</t-></code></a>
                        <a href="#typeof-specifier">             <code><t->typeof</t-></code></a>
                        <a href="#symbol-aliases">               <code><w->alias</w-></code></a>
                        <a href="#import-directive">             <code><w->from</w-></code></a>
                        <a href="#import-directive">             <code><w->import</w-></code></a>
                        <a href="#export-directive">             <code><w->export</w-></code></a>
                        <a href="#pointer-types">                <code><w->addr</w-></code></a>
                        <a href="#pointer-types">                <code>@</code></a>
                    </div>
                    <div class="split-td" style="line-height: 3ch;">
                        <a href="#if-statement">                 <code><w->if</w-></code></a>
                        <a href="#match-statement">              <code><w->match</w-></code></a>
                        <a href="#for-loops">                    <code><w->for</w-></code></a>
                        <a href="#while-loops">                  <code><w->while</w-></code></a>
                        <a href="#while-loops">                  <code><w->do</w-></code></a>
                        <a href="#continue-and-break-statements"><code><w->continue</w-></code></a>
                        <a href="#continue-and-break-statements"><code><w->break</w-></code></a>
                        <a href="#once-statement">               <code><w->once</w-></code></a>
                        <a href="#then-statement">               <code><w->then</w-></code></a>
                        <a href="#else-statement">               <code><w->else</w-></code></a>
                        <a href="#return-statement">             <code><w->return</w-></code></a>
                        <a href="#defer-statement">              <code><w->defer</w-></code></a>
                    </div>
                    <div class="split-td" style="line-height: 3ch;">
                        <elm->                                   <code>(</code><code>)</code></elm->
                        <a href="#scopes-and-symbols">           <elm-><code>{</code><code>}</code></elm-></a>
                        <a href="#statements">                   <code>,</code></a>
                        <a href="#statements">                   <code> ;</code></a>
                        <a href="#scopes-and-symbols">           <code>.</code></a>
                        <a href="#reflection">                   <code>:</code></a>
                    </div>
                </div></td>
            </tr>
            <tr>
                <th class="nowrap medium"><a href="#meta-keywords">Meta keyword</a></th>
                <td><div class="split-td-outer">
                    <div class="split-td">
                        <a href="#templates">                       <code><w->template</w-></code></a>
                        <a href="#templates">                       <elm-><code>&lt;</code><code>&gt;</code></elm-></a>
                        <a href="#template-parameters">             <code><w->type</w-></code></a>
                        <a href="#template-parameters">             <code>!</code></a>
                        <a href="#abbreviated-template-syntax">     <code>?</code></a>
                    </div>
                    <div class="split-td">
                        <a href="#specialization-constraint">       <code><w->when</w-></code></a>
                        <a href="#declarations.operator-precedence"><code><w->priority</w-></code></a>
                        <code><w->as</w-></code>
                        <code><w->to</w-></code>
                        <code>=</code>
                        <a href="enums"><code>:</code></a>
                        <code>...</code>
                        <a href="#reference-parameters"><code>&</code></a>
                        <a href="#pointer-types"><code>*</code></a>
                    </div>
                </div></td>
            </tr>
            <tr>
                <th class="nowrap medium"><a href="#literals">Literal</a></th>
                <td><div class="split-td-outer">
                    <div clas="split-td" style="line-height: 3ch;">
                        <ul><ul>Any sequence of characters with pattern:
                            <li><code><regex->(0[dbxo])?[0-9a-zA-Z_]+(\.[0-9a-zA-Z_]*)?</regex-></code></li>
                            <li><code><regex->[rf]?"</regex-><c- class="x-small">anything but unescaped double-quotes</c-><s->"</s-></code></li>
                            <li><code><s->'</s-><c- class="x-small">anything but unescaped quotes</c-><s->'</s-></code></li>
                        </ul></ul>
                    </div>
                </div></td>
            </tr>
            <tr>
                <th class="nowrap medium"><a href="#identifiers">Identifier</a></th>
                <td><div class="split-td-outer">
                    <div clas="split-td">
                        Any sequence of characters with pattern
                        <code><regex->[a-zA-Z][a-zA-Z0-9]*</regex-></code> or
                        <code><regex->[!$%&*+\-/&lt;=&gt;?\[\]^`|~]+</regex-></code>
                        that isn't a <a href="#keywords">keyword</a> or a <a href="#literals">literal</a>.
                    </div>
                </div></td>
            </tr>
        </tbody>
    </table></div>
</moveto-doc->
















<!--------------------------------------------------------------------->
<!-- keywords                                                        -->
<!--------------------------------------------------------------------->
<h1 id="keywords"></h1>
<moveto-doc->
    <p>
        <b>Keywords</b> are <b>built-in <a href="#tokens">tokens</a></b> that perform hard coded actions or have <b>special meaning</b>.<br>
        The language defines a total of 28 alphanumeric keywords and 6 symbolic keywords.<br>
        Their usage is detailedly explained in their respective sections.
    </p>
    <ul>
        <li>Misc keywords</li>
        <ul class="summary-list">
            <li>
                <span><a href="#import-directive"><code><w->from</w-></code></a></span>
                <span>Introduces an <a href="#import-directive">import directive</a>.</span>
            </li>
            <li>
                <span><a href="#import-directive"><code><w->import</w-></code></a></span>
                <span>Imports symbols from a <a href="#modules">module</a> while preserving the container <a href="#namespaces">namespace</a>.</span>
            </li>
            <li>
                <span><a href="#export-directive"><code><w->export</w-></code></a></span>
                <span>Defines which symbols can be exported from the current <a href="#modules">module</a>.</span>
            </li>
            <li>
                <span><a href="#pointer-types"><code><w->addr</w-></code></a></span>
                <span>Retrieves the address of an <a href="#right-and-left-values">l-value</a>.</span>
            </li>
            <li>
                <span><a href="#pointer-types"><code>@</code></a></span>
                <span>Dereferences a <a href="#pointer-types">pointer</a> in order to acces its value.</span>
            </li>
        </ul><br>
        <li>Declaration keywords</li>
        <ul class="summary-list">
            <li>
                <span><a href="#namespaces"><code><w->namespace</w-></code></a></span>
                <span>Used to declare a <a href="#namespaces">namespace</a>.</span>
            </li>
            <li>
                <span><a href="#enums"><code><w->enum</w-></code></a></span>
                <span>Used to declare an <a href="#enums">enum</a>.</span>
            </li>
            <li>
                <span><a href="#structs"><code><w->struct</w-></code></a></span>
                <span>Used to declare a <a href="#structs">struct</a>.</span>
            </li>
            <li>
                <span><a href="#symbol-aliases"><code><w->alias</w-></code></a></span>
                <span>Creates an alternative <a href="#name-resolution">path</a> for a <a href="#name-resolution">symbol</a>.</span>
            </li>
            <li>
                <span><a href="#const-qualifier"><code><t->const</t-></code></a></span>
                <span>Specifies that a pointer type is const. Also used to declare const variables and routine parameters.</span>
            </li>
            <li>
                <span><a href="#auto-specifier"><code><t->auto</t-></code></a></span>
                <span>Can be used in place of the <a href="#types">type</a> in the declaration of a <a href="#variables">variable</a>, a <a href="#routine-parameters">routine parameter</a> or a <a href="#routines">routine</a> to automatically use the best type based on its initializer <a href="#values">value</a> or return value.</span>
            </li>
            <li>
                <span><a href="#typeof-specifier"><code><t->typeof</t-></code></a></span>
                <span>Retrieves the <a href="#types">type</a> of an <a href="#expressions">expression</a>.</span>
            </li>
        </ul><br>
        <li>Flow control keywords</li>
        <ul class="summary-list">
            <li>
                <span><a href="#if-statement"><code><w->if</w-></code></a></span>
                <span>Used in the if selection statement.</span>
            </li>
            <li>
                <span><a href="#match-statement"><code><w->match</w-></code></a></span>
                <span>Used in the match selection statement.</span>
            </li>
            <li>
                <span><a href="#for-loops"><code><w->for</w-></code></a></span>
                <span>Used in the for loops.</span>
            </li>
            <li>
                <span><a href="#while-loops"><code><w->while</w-></code></a></span>
                <span>Used in the while loops.</span>
            </li>
            <li>
                <span><a href="#while-loops"><code><w->do</w-></code></a></span>
                <span>Used with <a href="#while-loops"><code><w->while</w-></code></a> to check the <a href="#bool-type">condition</a> after having executed the <a href="#statements">statement</a> instead of the other way around.</span>
            </li>
            <li>
                <span><a href="#continue-and-break-statements"><code><w->continue</w-></code></a></span>
                <span>Used to skip iterations.</span>
            </li>
            <li>
                <span><a href="#continue-and-break-statements"><code><w->break</w-></code></a></span>
                <span>Used to skip all the remaining iteration of one or more loops.</span>
            </li>
            <li>
                <span><a href="#once-statement"><code><w->once</w-></code></a></span>
                <span>Used to execute a statement during the first iteration.</span>
            </li>
            <li>
                <span><a href="#then-statement"><code><w->then</w-></code></a></span>
                <span>Used to execute a statement based on the outcome of the preceding loop or if.</span>
            </li>
            <li>
                <span><a href="#else-statement"><code><w->else</w-></code></a></span>
                <span>Used to execute a statement based on the outcome of the preceding loop or if.</span>
            </li>
            <li>
                <span><a href="#return-statement"><code><w->return</w-></code></a></span>
                <span>Returns the execution to the <a href="#function-calls">caller function</a>.</span>
            </li>
            <li>
                <span><a href="#defer-statement"><code><w->defer</w-></code></a></span>
                <span>Delays a <a href="#routine-calls">routine call</a> until the first <a href="#return-statement"><code><w->return</w-></code></a> statement is encountered.</span>
            </li>
        </ul><br>
        <li>Containers</li>
        <ul class="summary-list">
            <li>
                <span><elm-><code>(</code><code>)</code></elm-></span>
                <span>Groups an <a href="#expressions">expression</a>, or encloses a list of <a href="#routine-parameters">routine parameters</a>. Also used for <a href="#declarations.operator-precedence">operator precedence</a> and <a href="#specialization-constraints">specialization constraints.</a></span>
            </li>
            <li>
                <span><a href="#scopes"><elm-><code>{</code><code>}</code></elm-></a></span>
                <span>Declares a new <a href="#scopes">scope</a>. Used to declare most <a href="#syntactic-elements">syntactic elements</a>.</span>
            </li>
        </ul><br>
        <li>Separators</li>
        <ul class="summary-list">
            <li>
                <span><a href="#statements"><code>,</code></a></span>
                <span>Separates 2 or more <a href="#expressions">expressions</a> or <a href="#match-statement">match cases</a>.</span>
            </li>
            <li>
                <span><a href="#statements"><code>;</code></a></span>
                <span>Defines the end of <a href="#expression-statements">expression statements</a> or certain declarations and directives.</span>
            </li>
            <li>
                <span><a href="#name-resolution"><code>.</code></a></span>
                <span>Concatenates 2 or more symbol names to form a <a href="#language-structure.paths">symbol path</a>.
            </li>
            <li>
                <span><a href="#reflection"><code>:</code></a></span>
                <span>Concatenates 2 or more symbol names to form a <a href="#reflection">Reflection path</a>.</span>
            </li>
        </ul>
    </ul>
    <p>
        <a href="#keywords">Keywords</a> cannot be <a href="#name-shadowing">shadowed</a> like <a href="#identifiers">identifiers</a>.<br>
        Attempting to do so generates a semantic error. //TODO LINK
    </p>
</moveto-doc->
















<!--------------------------------------------------------------------->
<!-- Meta keywords                                                   -->
<!--------------------------------------------------------------------->
<h1 id="meta-keywords"></h1>
<moveto-doc->
    <p>
        <b>Meta keywords</b> are <a href="#tokens">tokens</a> that only have meaning when <b>combined</b> with other <a href="#keywords"><b>keywords</b></a> or <a href="#name-resolution">semantic elements</a>.<br>
        When active, they always take precedence over <a href="#identifiers">identifiers</a>.
    </p>
    <ul>
        <li><a href="#templates">Templates</a></li>
        <ul class="summary-list">
            <li>
                <span><a href="#templates"><code><w->template</w-></code></a></span>
                <span>
                    Used to declare a <a href="#templates">template</a><br>
                    <span class="meta-keyword-constraint">[When used before the <a href="#templates"><elm-><code>&lt;</code><code>&gt;</code></elm-></a> meta keyword]</span>.
                </span>
            </li>
            <li>
                <span><elm-><code>&lt;</code><code>&gt;</code></elm-></span>
                <span>
                    Part of the <a href="#templates">template</a> declaration, or part of the the <a href="#local-names">local name</a> of <a href="#templates">template</a> <a href="#name-resolution">symbols</a>. Also used in <a href="#import-directive">import directives</a><br>
                    <span class="meta-keyword-constraint">[When used after the <a href="#templates"><code><w->template</w-></code></a> meta keyword, after the <a href="#name-resolution">path</a> to a <a href="#templates">template</a> <a href="#name-resolution">symbol</a> or around the module name in an <a href="#import-directive">import directive</a>]</span>.
                </span>
            </li>
            <li>
                <span><a href="#template-parameters"><code><w->type</w-></code></a></span>
                <span>
                    Used to declare type <a href="#template-parameters">template parameters</a> or type <a href="#template-parameter-packs">template parameter packs</a><br>
                    <span class="meta-keyword-constraint">[When used as type in the declaration of a <a href="#template-parameters">template parameter</a> or <a href="#template-parameter-packs">template parameter pack</a>]</span>.
                </span>
            </li>
            <li>
                <span><a href="#abbreviated-template-syntax"><code>!</code></a></span>
                <span>
                    Identifies the parameters whose arguments are used to deduce a type template parameter or type template parameter pack<br>
                    <span class="meta-keyword-constraint">[When used between the type and the identifier in the declaration of a routine parameter or function parameter pack]</span>.
                </span>
            </li>
            <li>
                <span><a href="#abbreviated-template-syntax"><code>?</code></a></span>
                <span>
                    <a href="#abbreviated-template-syntax">Abbreviated template syntax</a><br>
                    <span class="meta-keyword-constraint">[When used between the type and the identifier of a <a href="#name-resolution">symbol</a> declaration inside a struct or routine declaration]</span>.
                </span>
            </li>
        </ul><br>
        <li>Misc</li>
        <ul class="summary-list">
            <li>
                <span><a href="#templates"><code><w->when</w-></code></a></span>
                <span>
                    Specifies a <a href="#specialization-constraints">specialization constraint</a><br>
                    <span class="meta-keyword-constraint">[When used before the body of a routine or struct declaration</span>.
                </span>
            </li>
            <li>
                <span><a href="#declarations.operator-precedence"><code><w->priority</w-></code></a></span>
                <span>
                    Defines the <a href="#declarations.operator-precedence">priority</a> of an <a href="#operators">operator</a><br>
                    <span class="meta-keyword-constraint">[When used at the end of the signature of an <a href="#operators">operator</a> or <a href="#templates">operator template</a> declaration]</span>.
                </span>
            </li>
            <li>
                <span><code><w->as</w-></code></span>
                <span>
                    Defines the name of the counter <a href="#variables">variable</a> of a <a href="#for-loops">for loop</a>, a new name for an <a href="#export-directive">exported</a> or <a href="#import-directive">imported</a> <a href="#name-resolution"> symbol</a>, or the new identifier used for a <a href="#symbol-aliases">symbol alias</a><br>
                    <span class="meta-keyword-constraint">[When used in the signature of a <a href="#for-loops">for-each</a>, <a href="#for-loops">for-n</a> or <a href="#for-loops">for-range</a> loop, after the name of a <a href="#name-resolution">symbol</a> in an <a href="#import-directive">import</a> or <a href="#export-directive">export</a> directive or in a <a href="#symbol-aliases">symbol alias</a> declaration]</span>.
                </span>
            </li>
            <li>
                <span><code><w->to</w-></code></span>
                <span>
                    Defines the end of a numerical range<br>
                    <span class="meta-keyword-constraint">[When used in the value of a <a href="#for-loops">for-range</a> loop or a <a href="#match-statement">match case</a>]</span>.
                </span>
            </li>
            <li>
                <span><code>=</code></span>
                <span>
                    Used to assign initializer values to <a href="#variables">variables</a> and default values to <a href="#routine-parameter">routine parameters</a><br> //TODO templates can prob have def values<br>
                    <span class="meta-keyword-constraint">[When used after the name of a <a href="#variables">variable</a> or <a href="#routine-parameters">routine parameter</a> declaration]</span>.
                </span>
            </li>
            <li>
                <span><code>:</code></span>
                <span>
                    Specifies the base type of an enum<br>
                    <span class="meta-keyword-constraint">[When used after the identifier of an enum declaration]</span>.
                </span>
            </li>
            <li>
                <span><code>...</code></span>
                <span>
                    Used to declare <a href="#template-parameter-packs">template parameter packs</a> and <a href="function parameter packs">function parameter packs</a><br>
                    <span class="meta-keyword-constraint">[When used after the identifier in the declaration of a template parameter pack or function parameter pack, or, if inside a struct or routine declaration, between the type and the identifier in the declaration of a routine parameter or function parameter pack]</span>.
                </span>
            </li>
            <li>
                <span><code>&</code></span>
                <span>
                    Used todeclare a reference parameter<br>
                    <span class="meta-keyword-constraint">[When used between the type and the identifier of a reference parameter]</span>.
                </span>
            </li>
            <li>
                <span><a href="#pointer-types"><code>*</code></a></span>
                <span>
                    Identifies the <a href="pointer-types">pointer version</a> of a type.<br>
                    <span class="meta-keyword-constraint">[When used at the end of a type path]</span>.
                </span>
            </li>
        </ul>
    </ul>
</moveto-doc->











<!--------------------------------------------------------------------->
<!-- Literals                                                        -->
<!--------------------------------------------------------------------->
<h1 id="literal-tokens"></h1>
<moveto-doc->
    <p>
        <b>Literals</b> are a <b>special type</b> of <a href="#tokens"><b>token</b></a>, as they can contain both alphanumeric characters and <code>.</code>.<br>
        Their usage and syntax are explained in <a href="#literals">Literals</a>.
    </p>
</moveto-doc->
















<!--------------------------------------------------------------------->
<!-- Identifiers                                                     -->
<!--------------------------------------------------------------------->
<h1 id="identifiers"></h1>
<moveto-doc->
    <p>
        <b>Identifiers</b> are used to <b>name and reference <a href="#name-resolution">symbols</a></b>.<br>
        An identifier can be
        alphanumeric (<code><regex->[a-zA-Z][a-zA-Z0-9]*</regex-></code>)
        or symbolic (<code><regex->[!$%&*+\-/&lt;=&gt;?\[\]^`|~]+</regex-></code>).
    </p>
    <p>
        Identifiers can be shadowed. This is explained in <a href="#name-shadowing">Name shadowing</a>.
    </p>
</moveto-doc->



